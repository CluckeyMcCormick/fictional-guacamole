// KDM - the Kinematic Driver Machine
// Flow - Graphviz Dot
// Directed Graph
digraph G {
    rankdir=LR; // Left to Right, instead of Top to Bottom
    nodesep=.55; // Ensure nodes are separated by at least .55... units?
    overlap=false; // Nodes are not allowed to overlap.
    compound=true; // Allow edges between clusters
    
    subgraph cluster0 {
        // Subgraph attributes.
        label = "OnGround";
        style="filled";
        // All Nodes in the Subgraph will have the following properties:
        node [style="filled", color="white"];
        // Idle to Walk Edge
        edge [label = "Target Position\nNot Null"];
        Idle -> Walk;
        // Walk to Idle Edge
        edge [label = "Target Position\nNull"];
        Walk -> Idle;
    }

    Start [shape=Mdiamond];

    edge [label = ""];
    Start -> Idle;
    
    edge [label = "Fall\nDetected", ltail = cluster0];
    Idle -> Falling;
    
    // Increased the weight here to allow for more label readability.
    edge [label = "Landed", weight=2.5];
    Falling -> Idle;
}
